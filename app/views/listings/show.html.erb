<%= render "shared/navbar" %>
<div class="container my-5">
  <div id="title-bar" class="row">
    <div class="col-6">
      <h1 style="color:rgb(34, 34, 34); font-size: 2rem; font-weight: 600;"><%= @listing.name %></h1>
    </div>
    <div id="title-bar-links" class="col-6 text-end">
      <button class="btn btn-outline-dark me-2">
        <i class="fas fa-share"></i> Share
      </button>
      <button class="btn btn-outline-dark">
        <i class="far fa-heart"></i> Save
      </button>
    </div>
  </div>
  <div class="row"> <%# Picture row %>
    <div class="col-12" style="width: 500px; height: 500px; background-image: url('https://www.capitaland.com/en/find-a-property/global-property-listing/residential/the-interlace/_jcr_content/root/container/container/entitydetails.coreimg.85.1600.jpeg/content/dam/capitaland-media-library/residential/Singapore/Singapore/The%20Interlace/Interlace_Woh%20Hup%20and%20CLS.jpg'); background-size: cover; background-position: center;">
    </div>
  </div>
  <div class="row"> <%# Listing details row %>
    <div class="col-8"> <%# Listing details column %>
      <div class="row"> <%# Listing name and room details row %>
        <h2><%= @listing.name %></h2>
        <p>Up to <%= @listing.capacity %> guests</p>
      </div>
      <div class="row"> <%# Listing rating row %>
      </div>
      <div class="row"> <%# Listing host row %>
      </div>
      <div class="row"> <%# Listing perks %>
        <div class="row">
          <h5>Dive right in</h5>
          <p>This is one of the few places in the area with a pool.</p>
        </div>
        <div class="row">
          <h5>Self check-in</h5>
          <p>You can check in with the building staff.</p>
        </div>
        <div class="row">
          <h5>Free cancellation within 48hrs</h5>
          <p>Get a full refund if you change your mind.</p>
        </div>
      </div>
      <div class="row"> <%# Listing details %>
        <h3>Description</h3>
        <p><%= @listing.description %></p>
      </div>
      <div class="row"> <%# Listing location %>
        <h3>Location</h3>
        <p><%= @listing.address %></p>
      </div>
      <div class="row"> <%# Listing amenities %>
        <h3>What this place offers</h3>
        <div class="col-4">
          <p>Free parking</p>
          <p>Air conditioning</p>
          <p>Luggage drop-off allowed</p>
        </div>
        <div class="col-4">
          <p>Wifi</p>
          <p>Pool</p>
          <p>Private balcony</p>
        </div>
      </div>





        <p><%= @listing.address %></p>
        <p><%= @listing.location.country_code %></p>
    </div>
    <div class="col-4"> <%# Calendar form column %>
      <%= simple_form_for Booking.new, url: new_listing_booking_path(@listing), method: :get, html: { data: { controller: "datepicker" } } do |f| %>
        <input type="text" 
               data-datepicker-target="dateInput"
               data-available-dates="<%= @listing.availabilities.map { |a| { from: a.start_date, to: a.end_date } }.to_json %>"
               data-disabled-dates="true">
        <%= f.input :start_date,
            as: :string,
            wrapper_html: { class: "d-none" },
            input_html: { data: { datepicker_target: "startDate" } } %>
        <%= f.input :end_date,
            as: :string,
            wrapper_html: { class: "d-none" },
            input_html: { data: { datepicker_target: "endDate" } } %>
        <%= f.input :number_of_guests, input_html: { class: 'form-control', style: 'width: 50%; background-color: white;' } %>
        <%= f.button :submit, class: "btn btn-primary w-50", style: "background-color: #FF385C; border: none;" %>
      <% end %>
    </div>
  </div>
</div>
